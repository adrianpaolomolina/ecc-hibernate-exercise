<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>EmployeeController.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Service Core</a> &gt; <a href="index.source.html" class="el_package">com.apm.core</a> &gt; <span class="el_source">EmployeeController.java</span></div><h1>EmployeeController.java</h1><pre class="source lang-java linenums">package com.apm.core;

import java.util.Date;
import java.util.Set;
import java.util.List;
import java.util.stream.Collectors;
import org.hibernate.Hibernate;

<span class="fc" id="L9">public class EmployeeController {</span>

<span class="fc" id="L11">  public Dao dao = new Dao();</span>
<span class="fc" id="L12">  public static String message = &quot;&quot;;</span>

  public void addEmployee ( EmployeeName employeeName, Date birthDate, Date hireDate, float gwa, boolean isCurrentlyHired,
                      Address address, Set&lt;Contact&gt; contacts, Set&lt;Roles&gt; roles ) {
<span class="nc" id="L16">      Employee employee = new Employee ( employeeName, birthDate, hireDate,</span>
                      gwa, isCurrentlyHired, address, contacts, roles );
<span class="nc" id="L18">      contacts.forEach ( contact -&gt; contact.setEmployee ( employee ) );</span>
<span class="nc" id="L19">      dao.save ( employee );</span>
<span class="nc" id="L20">  }</span>

 public String deleteEmployee ( int id ) throws Exception {
    try {
<span class="nc" id="L24">      Employee employee = getEmployee ( id );</span>
<span class="nc" id="L25">      return &quot;Employee &quot; + dao.delete ( employee );</span>
<span class="nc" id="L26">    } catch ( NullPointerException e ) {</span>
<span class="nc" id="L27">      message = &quot; Employee does not exist! &quot;;</span>
<span class="nc" id="L28">      throw e;</span>
    }
  }

  public Employee getEmployee ( int id ) throws Exception {
<span class="nc" id="L33">    Employee employee = new Employee();</span>
<span class="nc" id="L34">    employee = dao.getSpecific ( Long.valueOf ( id ) , Employee.class );</span>
<span class="nc" id="L35">    System.out.println(employee.getEmployeeName());</span>
<span class="nc" id="L36">    return employee;</span>
  }

  public Employee getEmployeeWithContacts ( int id ) throws Exception {
<span class="nc" id="L40">    Employee employee = new Employee();</span>
<span class="nc" id="L41">    employee = dao.getSpecificWithContacts ( Long.valueOf ( id ) , Employee.class );</span>
<span class="nc" id="L42">    return employee;</span>
  }

  public Employee getEmployeeWithRoles ( int id ) throws Exception {
<span class="nc" id="L46">    Employee employee = new Employee();</span>
<span class="nc" id="L47">    employee = dao.getSpecificWithRoles ( Long.valueOf ( id ) , Employee.class );</span>
<span class="nc" id="L48">    return employee;</span>
  }

  public EmployeeName createEmployeeName ( String lastName, String firstName, String middleName, String suffix, String title ) {
<span class="nc" id="L52">    return new EmployeeName ( lastName, firstName, middleName, suffix, title );</span>
  }

  public Address createNewAddress ( int streetNumber, String streetName, String barangay,
                        String city, String zipCode ) {
<span class="nc" id="L57">    return new Address ( streetNumber, streetName, barangay, city, zipCode );</span>
  }

  public Contact createNewContact ( String contactType, String contact ) {
<span class="nc" id="L61">    return new Contact ( contactType, contact );</span>
  }

  public &lt;T&gt; List&lt;T&gt; retrieveElements (final Class&lt;T&gt; type) {
<span class="nc" id="L65">    return dao.getAll(type);</span>
  }

  public String updateElement ( Object object ) {
<span class="nc" id="L69">    dao.update ( object );</span>
<span class="nc" id="L70">    return &quot;Database successfully Updated!&quot;;</span>
  }

  public Employee getNewEmployeeRoles ( Employee employee, int roleID ) throws Exception {
<span class="nc" id="L74">		Set&lt;Roles&gt; roles = employee.getRoles();</span>
<span class="nc" id="L75">		Roles role = dao.getSpecific ( Long.valueOf ( roleID ), Roles.class );</span>
<span class="nc bnc" id="L76" title="All 2 branches missed.">    if ( role == null ) {</span>
<span class="nc" id="L77">      throw new NullPointerException();</span>
    } else {
<span class="nc" id="L79">      roles.add ( role );</span>
<span class="nc" id="L80">  		employee.setRoles ( roles );</span>
<span class="nc" id="L81">  		return employee;</span>
    }
  }

  public Employee removeEmployeeRole ( Employee employee, int roleID ) throws Exception {
<span class="nc" id="L86">    Set&lt;Roles&gt; roles = employee.getRoles();</span>
<span class="nc" id="L87">		Roles role = dao.getSpecific ( Long.valueOf ( roleID ), Roles.class );</span>
<span class="nc bnc" id="L88" title="All 2 branches missed.">    if ( role == null ) {</span>
<span class="nc" id="L89">      throw new NullPointerException();</span>
    } else {
<span class="nc" id="L91">      roles.remove ( role );</span>
<span class="nc" id="L92">  		employee.setRoles ( roles );</span>
<span class="nc" id="L93">  		return employee;</span>
    }
  }

  public Employee addContact(Employee employee, Set&lt;Contact&gt; contacts) {
<span class="nc" id="L98">		contacts.forEach(contact -&gt; {</span>
<span class="nc" id="L99">			contact.setEmployee(employee);</span>
<span class="nc" id="L100">			employee.getContacts().add(contact);</span>
<span class="nc" id="L101">		});</span>
<span class="nc" id="L102">		return employee;</span>
	}

// FROM HERE

  public Contact getSpecificContact ( Long employeeId, int contactId ) throws Exception {
<span class="nc" id="L108">    Contact contact = new Contact();</span>
    try {
<span class="nc" id="L110">      contact = dao.getSpecific ( Long.valueOf(contactId), Contact.class );</span>
<span class="nc bnc" id="L111" title="All 2 branches missed.">      if ( contact.getEmployee().getEmployeeId() != employeeId ) {</span>
<span class="nc" id="L112">         message = &quot;Employee does not own this contact info!&quot;;</span>
<span class="nc" id="L113">        throw new RuntimeException();</span>
      }
<span class="nc" id="L115">    } catch ( Exception e ) {</span>
<span class="nc" id="L116">      message = &quot;Contact does not exist!&quot;;</span>
<span class="nc" id="L117">      throw e;</span>
<span class="nc" id="L118">    }</span>
<span class="nc" id="L119">    return contact;</span>
  }

  public String deleteContact ( Employee employee, Contact contact ) throws Exception {
<span class="nc bnc" id="L123" title="All 2 branches missed.">    if ( employee.getContacts().size() == 1 ) {</span>
<span class="nc" id="L124">      message =  &quot;Cannot Delete! The Contact of an Employee should at least be 1! &quot;;</span>
<span class="nc" id="L125">      throw new RuntimeException();</span>
    }
<span class="nc" id="L127">    employee.getContacts().remove ( contact );</span>
<span class="nc" id="L128">    return updateElement ( employee );</span>
  }

  public String updateContact ( Employee employee, Contact contact, String newContact ) throws Exception {
    try {
<span class="nc" id="L133">      employee.getContacts().remove ( contact );</span>
<span class="nc" id="L134">      contact.setContact ( newContact );</span>
<span class="nc" id="L135">      employee.getContacts().add ( contact );</span>
<span class="nc" id="L136">      dao.update ( contact );</span>
<span class="nc" id="L137">      return &quot;Successfully changed contact details to &quot; + newContact;</span>
<span class="nc" id="L138">    } catch ( Exception e ) {</span>
<span class="nc" id="L139">      message = &quot; Failed to change contact details! &quot;;</span>
<span class="nc" id="L140">      throw e;</span>
    }
  }

  public List&lt;Employee&gt; sortByGwa ( List&lt;Employee&gt; employee ) {
<span class="nc" id="L145">    employee = employee.stream()</span>
<span class="nc" id="L146">            .sorted ( ( employee1, employee2 ) -&gt; Float.compare ( employee1.getGwa(), employee2.getGwa() ) )</span>
<span class="nc" id="L147">            .collect ( Collectors.toList());</span>
<span class="nc" id="L148">    return employee;</span>
  }

  public List&lt;Employee&gt; sortByLastName ( List&lt;Employee&gt; employee ) {
<span class="nc" id="L152">    String query = &quot;FROM Employee E ORDER BY E.employeeName.lastName &quot;;</span>
<span class="nc" id="L153">    employee = dao.getByQuery ( query, Employee.class );</span>
<span class="nc" id="L154">    return employee;</span>
  }

  public List&lt;Employee&gt; sortByHireDate ( List&lt;Employee&gt; employee ) {
<span class="nc" id="L158">    String query = &quot;FROM Employee E ORDER BY E.hireDate&quot;;</span>
<span class="nc" id="L159">    employee = dao.getByQuery ( query, Employee.class );</span>
<span class="nc" id="L160">    return employee;</span>
  }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.1.201803210924</span></div></body></html>